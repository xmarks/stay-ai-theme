"use strict";(self.webpackChunk_roots_bud_sage=self.webpackChunk_roots_bud_sage||[]).push([[8471],{"./scripts/components/newsletter-form.js":(t,e,o)=>{o.r(e),o.d(e,{default:()=>r});class r{constructor(t){this.componentNode=t,this.formContainerSelector=".newsletter-form__container .hbspt-form",this.formContainer=this.componentNode.querySelector(this.formContainerSelector),this.portalId=null,this.formId=null,this.init()}init(){const{portalId:t,formId:e}=window.app_hbspt?.newsletter_form||{};this.formContainer&&t&&e&&(this.portalId=t,this.formId=e,window.hbspt?this.createForm():this.loadHubspotScript().then(()=>this.createForm()).catch(()=>this.hideForm()))}createForm(){window.hbspt.forms.create({portalId:this.portalId,formId:this.formId,target:this.formContainerSelector,onFormReady:()=>{this.replaceDefaultSubmitBtn(),this.removeLoader()}})}replaceDefaultSubmitBtn(){const t=this.formContainer.querySelectorAll('input[type="submit"]');for(let e=0;e<t.length;e++){const o=document.createElement("button");o.className=t[e].className,o.classList.add("btn","btn_secondary"),o.type=t[e].type,o.onclick=t[e].onclick;const r=document.createElement("span");r.textContent=t[e].value,o.appendChild(r),t[e].parentNode.replaceChild(o,t[e])}}loadHubspotScript(){return new Promise((t,e)=>{if(!window.app_hbspt||!window.app_hbspt.src)return e(new Error("HubSpot script source is not defined"));const o=document.createElement("script");o.src=window.app_hbspt.src,o.async=!0,o.onload=()=>t(),o.onerror=()=>e(new Error("Failed to load HubSpot script"));try{document.body.appendChild(o)}catch(t){e(new Error("Failed to append script to the document: "+t.message))}})}removeLoader(){this.componentNode.classList.remove("load-form")}hideForm(){this.componentNode.parentNode.classList.add("hide-form")}}}}]);