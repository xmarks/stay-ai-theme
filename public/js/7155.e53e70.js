"use strict";(self.webpackChunk_roots_bud_sage=self.webpackChunk_roots_bud_sage||[]).push([[7155,6580,1561,4446],{"./scripts/components/blog-articles.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var i=s("./scripts/components/load-more-articles.js"),a=s("./scripts/components/chips.js"),n=s("./scripts/components/search-input.js");class r extends i.default{constructor(t){super({el:t,endpoint:window.api.route.get.blog.posts,maxRequest:t.dataset.auto_scroll,categoryKey:"category",searchKey:"s"}),this.updateContent=this.updateContent.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.load()}updateContent(){this.reset(),this.getContent()}debouncedUpdate(){clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.updateContent()},500)}handleSearchChange({e:t,value:e}){t.preventDefault(),e?this.url.searchParams.set(this.searchKey,e):this.url.searchParams.delete(this.searchKey),history.replaceState(null,"",this.url.toString()),this.debouncedUpdate()}load(){const t=new URL(window.location.href);this.url=t,new a.default({onChange:({categoryId:t})=>{"0"===t?this.url.searchParams.delete(this.categoryKey):this.url.searchParams.set(this.categoryKey,t),history.replaceState(null,"",this.url.toString()),this.debouncedUpdate()}});const e=this.url.searchParams.get(this.searchKey);new n.default({defaultValue:e,onChange:this.handleSearchChange,onSubmit:this.handleSearchChange})}}},"./scripts/components/chips.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor(t){this.activeItem=null,this.params=t,this.init()}clickHandler(t){const e=t.dataset.term_id;t.addEventListener("click",()=>{this.activeItem.classList.remove("chips-item_active"),t.classList.add("chips-item_active"),this.activeItem=t,this.params?.onChange({categoryId:e})})}init(){const t=document.querySelector(".chips"),e=t?.querySelectorAll(".chips-item");this.activeItem=t?.querySelector(".chips-item_active"),e?.forEach(this.clickHandler.bind(this))}}},"./scripts/components/load-more-articles.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor({el:t,endpoint:e,maxRequest:s,categoryKey:i,searchKey:a}){this.requestWasSent=!1,this.el=t.querySelector(".load-more-articles"),this.noRequestOnInit=this.el?.classList?.contains("no-request-on-init"),this.contentSection=t.querySelector(".load-more-container"),this.track=this.el?.querySelector(".load-more-articles__track"),this.button=this.el?.querySelector(".load-more-articles__button"),this.buttonInitialized=!1,this.page=1,this.endpoint=e,this.initMaxRequest=s?Number(s)||0:2,this.maxAutoRequest=this.initMaxRequest,this.getContent=this.getContent.bind(this),this.categoryKey=i,this.searchKey=a,this.controller=new AbortController,this.init()}reset(){this.controller?.abort(),this.noRequestOnInit=!1,this.pagination=null,this.page=0,this.maxAutoRequest=this.initMaxRequest,this.contentSection.innerHTML="",this.buttonInitialized=!1,this.requestWasSent=!1,this.el?.classList.remove("load-more-articles_show-button"),this.button?.removeEventListener("click",this.getContent)}async getContent(t){if(t?.preventDefault(),this.pagination&&this.pagination.max_num_pages===this.page)return;if(this.requestWasSent)return;this.el?.classList.add("requesting"),this.requestWasSent=!0,this.page+=1;const e=new URL(`${this.endpoint}`);e.searchParams.set("page",this.page),e.searchParams.set("nonce",window.api.nonce);const s=new URLSearchParams(window.location.search),i=s.get(this.categoryKey);i&&e.searchParams.append(this.categoryKey,i);const a=s.get(this.searchKey);a&&e.searchParams.append(this.searchKey,a);let n="";try{this.controller=new AbortController;const t=await fetch(e.toString(),{signal:this.controller.signal}),{data:s,pagination:i}=await t.json();if(n=s,this.el?.classList.remove("requesting"),!i)throw new Error;this.pagination=i,this.page=this.pagination.current_page,this.pagination.max_num_pages===this.page?(this.el?.classList.remove("load-more-articles_show-button"),this.button?.removeEventListener("click",this.getContent)):this.page>=this.maxAutoRequest&&this.initLoadButton()}catch(t){this.pagination={max_num_pages:this.page},this.el?.classList.remove("load-more-articles_show-button")}finally{Array.isArray(n)?this.contentSection.insertAdjacentHTML("beforeend",n.reduce((t,e)=>t+e,"")):n&&this.contentSection.insertAdjacentHTML("beforeend",n),this.el?.classList.remove("requesting"),this.requestWasSent=!1}}initLoadButton(){this.el?.classList.add("load-more-articles_show-button"),this.button&&!this.buttonInitialized&&(this.buttonInitialized=!0,this.button.addEventListener("click",this.getContent))}init(){if(!this.contentSection||!this.track)return;0===this.maxAutoRequest&&this.initLoadButton();new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(this.noRequestOnInit||this.page<=this.maxAutoRequest&&this.getContent())})},{threshold:0}).observe(this.track)}}},"./scripts/components/search-input.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor(t){this.params=t,this.init()}init(){const t=document.querySelector(".search-input"),e=t.querySelector(".search-input__submit-button"),s=t.querySelector(".search-input__input"),i=t.querySelector(".search-input__clear-button"),a=()=>{s.value?t.classList.add("search-input_has-value"):t.classList.remove("search-input_has-value")};this.params.defaultValue&&(s.value=this.params.defaultValue,a()),s.addEventListener("focus",()=>{t.classList.add("search-input_focused")}),s.addEventListener("blur",()=>{t.classList.remove("search-input_focused")}),s.addEventListener("keyup",t=>{this.params?.onChange({e:t,value:s.value}),a()}),e.addEventListener("click",t=>{this.params?.onSubmit({e:t,value:s.value})}),i.addEventListener("click",t=>{s.value="",this.params?.onSubmit({e:t,value:""}),a()})}}}}]);